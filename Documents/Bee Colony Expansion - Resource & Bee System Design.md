# Bee Colony Expansion - Resource & Bee System Design
# Bee Colony Expansion - Resource & Bee System Design

**Document Version:** 2.0  
**Last Updated:** December 30, 2025  
**Status:** Design Updated - Player Agency Focus

---

## Overview

This document outlines the complete Resource and Worker Bee system for Bee Colony Expansion MVP. The game transitions from a pure clicker to an idle/clicker hybrid as players progress.

**Key Design Change:** Players have full control over where they spawn worker bees, choosing between Hive (Wax generation) or Flowers (Nectar generation) based on their strategic needs.

---

## Core Game Loop

### Phase 1: Pure Clicker (Early Game - Minutes 0-1)
```
Player (The First Worker Bee):
├── Clicks Hive → Generates 1 Wax per click
├── Clicks connected Flower → Generates 1 Nectar per click
└── Spends Wax to place Connector tiles (10 Wax each)

Goal: Manually gather resources, connect first Flower
```

### Phase 2: Idle Transition (Mid Game - Minutes 1-3)
```
Once player has enough Nectar:
├── Spawn first AI Worker Bee (costs 30 Nectar)
├── Player CHOOSES where to spawn: Hive or connected Flower
├── Worker auto-collects resources passively at chosen location
└── Player still clicks for extra resources (clicker bonus)

Goal: Transition from active clicking to passive generation
```

### Phase 3: Automation (Late Game - Minutes 3-5)
```
Multiple Workers:
├── Player strategically places workers based on resource needs
├── Player focuses on expansion strategy
├── Clicks provide bonus acceleration
└── Complete win condition (all 3 Flowers connected)

Goal: Optimize resource flow through strategic placement, achieve victory
```

---

## Resources

### Wax (Building Currency)
- **Generated by:** 
  - Player clicks on Hive (1 Wax per click)
  - AI Worker Bees assigned to Hive (1 Wax per second)
- **Used for:** Placing Connector tiles (10 Wax each)
- **Starting amount:** 0
- **Purpose:** Expand pathways to reach Flowers

### Nectar (Growth Currency)
- **Generated by:**
  - Player clicks on connected Flowers (1 Nectar per click)
  - AI Worker Bees assigned to Flowers (0.5 Nectar per second)
- **Used for:** Spawning new Worker Bees (30 Nectar each)
- **Starting amount:** 0
- **Purpose:** Increase workforce, scale resource generation

---

## Worker Bee System

### Starting State
```
Game Start:
├── 1 Hive tile (center at 0,0)
├── 3 Flowers (randomly placed, 2 tiles away)
├── 1 Queen Bee (visual decoration on Hive)
├── Player = "The First Worker" (clicks to gather)
├── 0 Wax
├── 0 Nectar
└── 0 AI Worker Bees
```

### Worker Bee Properties
- **Cost to spawn:** 30 Nectar (flat rate for all Workers)
- **Maximum Workers:** Unlimited (player can spawn as many as they can afford)
- **Assignment System:** Player Choice (Manual Assignment)
- **Generation Rates:**
  - Hive Workers: 1 Wax per second
  - Flower Workers: 0.5 Nectar per second

### Player-Controlled Assignment System

Workers are manually assigned by the player at spawn time:
```
Worker Spawn Flow:
1. Player clicks "Spawn Worker" button (requires 30 Nectar)
2. Game enters "Worker Placement Mode"
3. Valid spawn locations highlight (Hive + all connected Flowers)
4. Player hovers over desired location (highlight glows)
5. Player clicks to confirm spawn location
6. Worker appears and begins generating resources
```

**Why Player Choice:**
- Gives strategic depth (choose Wax vs Nectar based on current needs)
- Player agency improves engagement and decision-making
- More satisfying gameplay loop (player controls their economy)
- Adapts to different playstyles (aggressive expansion vs. resource hoarding)

---

## Player Interaction (Clicking)

### Clickable Targets

**Hive (Always Clickable):**
- Click → +1 Wax
- Visual feedback: Tile bounce, "+1 Wax" floating text, particle effect
- Available from game start

**Flower (Only When Connected):**
- Click → +1 Nectar
- Requirement: Continuous path from Hive to Flower
- Visual feedback: Tile bounce, "+1 Nectar" floating text, particle effect
- When disconnected: Grayed out, no interaction

### Click Bonus System

Player clicks remain valuable even with AI Workers:
```
Click Value Scaling:
- Base: 1 resource per click
- With 1-2 Workers: 1 resource per click (no bonus)
- With 3-4 Workers: 2 resources per click (+1 bonus)
- With 5+ Workers: 3 resources per click (+2 bonus)

Formula: clickValue = 1 + floor(workerCount / 2)
```

**Purpose:** Keeps clicking relevant in late game, rewards player engagement

---

## Visual Feedback Requirements

### Clicking Feedback
```
On Player Click (Hive or Flower):
├── Tile scale animation (bounce)
├── Floating text: "+1 Wax" or "+1 Nectar"
├── Particle effect (sparkles, pollen)
└── Sound effect (satisfying ding/chime)
```

### Tile States

**Hive (Active):**
- Normal yellow/gold color
- Shows assigned Worker count if any
- Always glows slightly

**Flower (Connected):**
- Normal pink/purple color
- Gentle pulse/glow animation
- Shows assigned Worker count if any
- Clickable cursor on hover

**Flower (Disconnected):**
- Desaturated/grayed out appearance
- No glow or pulse
- Not clickable
- Shows "Not Connected" on hover

### Worker Bee Visualization (MVP)

**Simple Approach (Recommended for MVP):**
- Small sprite/circle above assigned tile
- Gentle bobbing animation (up/down)
- Color-coded: Yellow for Hive, Pink for Flower
- No pathfinding or movement needed

**Future Enhancement (Post-MVP):**
- 3D bee models
- Flying animation along tile paths
- Carry visual resources (Wax/Nectar)

---

## UI Requirements

### Resource Display (Top-Left Corner)
```
┌─────────────────────┐
│ Wax: 25             │
│ Nectar: 15          │
│                     │
│ Workers: 2          │
│ [Spawn Worker]      │  ← Button (costs 30 Nectar)
│ Cost: 30 Nectar     │
└─────────────────────┘
```

**Button States:**
- **Enabled (green):** Player has ≥30 Nectar
- **Disabled (gray):** Player has <30 Nectar

**When Clicked:**
- Enters Worker Placement Mode
- Shows spawn location highlights

### Worker Placement Mode UI

**Visual Indicators:**
```
During Placement Mode:
├── Highlights on Hive (always available)
├── Highlights on all connected Flowers
├── Hover effect (bright glow) on targeted location
├── Optional: Cursor change to indicate placement mode
└── Optional: "Choose spawn location" text prompt
```

**Cancel Options:**
- Right-click anywhere
- Press Escape key
- Click outside valid spawn locations

### Tile Hover Tooltips

**Hive Tooltip:**
```
┌─────────────────────┐
│ Hive                │
│ Click: +1 Wax       │
│ Workers: 1          │
│ Auto: 1 Wax/sec     │
└─────────────────────┘
```

**Connected Flower Tooltip:**
```
┌─────────────────────┐
│ Flower (Connected)  │
│ Click: +1 Nectar    │
│ Workers: 1          │
│ Auto: 0.5 Nectar/sec│
└─────────────────────┘
```

**Disconnected Flower Tooltip:**
```
┌─────────────────────┐
│ Flower (Disconnected)│
│ Build a path to      │
│ collect Nectar!      │
└─────────────────────┘
```

---

## Gameplay Flow (Complete Example)

### Minute 0-1: Pure Clicker Phase
1. Player clicks Hive 10 times → Accumulates 10 Wax
2. Activates Build Mode
3. Places first Connector tile (costs 10 Wax)
4. Repeats: Click Hive 10x → Place Connector
5. Continues until first Flower is connected (requires ~2-3 Connectors)
6. First Flower now clickable for Nectar

### Minute 1-2: Hybrid Phase
1. Player alternates clicking Hive and Flower
2. Accumulates 30 Nectar (requires ~30 clicks on Flower)
3. Clicks "Spawn Worker" button → Enters placement mode
4. Player chooses Hive (needs more Wax for expansion)
5. First Worker spawns at Hive
6. Wax now generates passively (1 per second)
7. Player focuses more on clicking Flower for Nectar

### Minute 2-3: Strategic Phase
1. Player uses passive Wax to build toward second Flower
2. Accumulates 30 Nectar again
3. Clicks "Spawn Worker" → Chooses first connected Flower
4. Nectar now generates passively (0.5 per second)
5. Second Flower connects
6. Player decides: More Wax workers or Nectar workers?

### Minute 3-5: Optimization Phase
1. Player has multiple workers (3-5)
2. Balances worker placement based on bottlenecks
3. Clicks provide significant bonus (2-3x multiplier)
4. Passive generation handles most resource needs
5. Player focuses on connecting third Flower
6. All 3 Flowers connected → Win condition achieved

**Total MVP Playtime:** ~5 minutes ✅

---

## Technical Implementation Notes

### Resource Manager Architecture
```
ResourceManager (Singleton MonoBehaviour)
├── Fields:
│   ├── currentWax (float for accumulation, int for display)
│   ├── currentNectar (float for accumulation, int for display)
│   ├── waxAccumulator (tracks fractional seconds)
│   ├── nectarAccumulator (tracks fractional seconds)
│   └── activeWorkers (List<WorkerBee>)
│
├── Methods:
│   ├── AddWax(int amount) - from player clicks
│   ├── AddNectar(int amount) - from player clicks
│   ├── CanAffordConnector() → bool (checks Wax >= 10)
│   ├── SpendWax(int amount) → bool
│   ├── CanAffordWorker() → bool (checks Nectar >= 30)
│   ├── SpawnWorker(Vector2Int coord, AssignmentType type) → bool
│   └── Update() - handles passive generation accumulation
```

### Worker Bee Class
```
WorkerBee (Data class, not MonoBehaviour)
├── Fields:
│   ├── assignedTileCoordinate (Vector2Int)
│   ├── assignmentType (enum: Hive, Flower)
│   ├── generationRate (float: 1.0 for Hive, 0.5 for Flower)
│   └── visualObject (GameObject sprite/model)
│
├── Constructor:
│   └── WorkerBee(Vector2Int coord, AssignmentType type)
│
└── Methods:
    └── GetGenerationRate() → float
```

### Worker Placement Controller
```
WorkerPlacementController (MonoBehaviour)
├── Purpose: Handles placement mode UI and interaction
│
├── Methods:
│   ├── ActivatePlacementMode() - Called by Spawn Worker button
│   ├── ShowSpawnLocations() - Highlights Hive + connected Flowers
│   ├── DetectHover() - Checks which location player is hovering
│   ├── OnLocationClicked() - Spawns worker at chosen location
│   └── CancelPlacement() - Exits placement mode
│
└── Visual Management:
    ├── Creates highlight GameObjects on valid spawn tiles
    ├── Changes material on hover (normal → bright)
    └── Destroys highlights when placement completes/cancels
```

### Flower Connection Detection
```
Method: IsTileConnectedToHive(Vector2Int coord)
Returns: bool (is connected to Hive)

Logic:
1. Use existing BFS pathfinding from HexGrid
2. Start at coord
3. Search for path to Hive (0,0)
4. Return true if path exists
5. Cache result until next tile placement
```

### Click Detection
```
On Player Click:
1. Raycast from mouse to detect tile
2. Get tile coordinate
3. Check if tile is Hive or Flower
4. If Flower, verify connection with IsTileConnectedToHive()
5. If valid, call ResourceManager.AddWax() or AddNectar()
6. Trigger visual feedback (animation, floating text, particles)
```

---

## Balance & Tuning Values

### Core Values (MVP)
| Parameter | Value | Rationale |
|-----------|-------|-----------|
| Starting Wax | 0 | Pure clicker start |
| Starting Nectar | 0 | Must connect Flower first |
| Wax per Click | 1 | Base unit |
| Nectar per Click | 1 | Equal to Wax |
| Connector Cost | 10 Wax | ~10 clicks, feels achievable |
| Worker Cost | 30 Nectar | ~1 minute with 1 Flower |
| Max Workers | Unlimited | Player-driven economy scaling |
| Hive Generation | 1 Wax/sec | Matches click value |
| Flower Generation | 0.5 Nectar/sec | Slower, more valuable |
| Click Bonus Threshold | 3 Workers | Rewards progression |

### Alternative Starting State (Quick Start Option)
```
If playtesting shows 10-click start is too slow:
├── Starting Wax: 10 (can place first tile immediately)
├── Starting Nectar: 0 (still must connect Flower)
└── Reduces initial friction, gets player building faster
```

---

## Future Enhancements (Post-MVP)

### Upgrade System
- **Efficient Foraging:** Workers generate +25% resources (50 Nectar)
- **Click Training:** Player clicks worth +1 bonus (100 Nectar)
- **Rapid Building:** Connector tiles cost 8 Wax instead of 10 (75 Nectar)
- **Bulk Spawning:** Spawn 3 workers at once for 80 Nectar (20 Nectar discount)

### Worker Specialization
- **Forager Bee:** Generates 1.0 Nectar/sec (upgrade cost: 50 Nectar)
- **Builder Bee:** Generates 1.5 Wax/sec (upgrade cost: 50 Wax)
- **Scout Bee:** Reveals optimal path to Flowers (upgrade cost: 100 Nectar)

### Worker Management Features
- **Reassign Worker:** Click existing worker to move to different location
- **Dismiss Worker:** Remove worker to get 15 Nectar refund
- **Auto-Assign Toggle:** Optional AI assignment for players who want it

### Visual Enhancements
- 3D bee models with flight animation
- Pathfinding along Connector tiles
- Resource carry visualization (bees hold Wax/Nectar)
- Hive interior view showing stored resources

### Advanced Mechanics
- Multiple Hive tiles (expansion mechanic)
- Different Flower types (Rose = 1.0 Nectar/sec, Dandelion = 0.3 Nectar/sec)
- Queen Bee active ability (temporary generation boost)
- Day/night cycle (bonus generation at certain times)

---

## Open Questions & Decisions

### Resolved Decisions:
✅ **Worker Assignment:** Player Choice (Manual Assignment) - Selected  
✅ **Worker Cost:** Flat 30 Nectar each  
✅ **Max Workers:** Unlimited (player-driven scaling)  
✅ **Click Bonus:** Scales with worker count (+1 per 2 Workers)  

### Remaining Questions:

1. **Starting Wax:**
   - Option A: 0 Wax (pure clicker start, 10 clicks needed)
   - Option B: 10 Wax (quick start, immediate placement)
   - **Recommendation:** Test both, use Option B if initial clicking feels grindy

2. **Visual Style for Bees:**
   - Option A: Simple colored sprites/circles (faster implementation)
   - Option B: Low-poly 3D bee models (more polished)
   - **Recommendation:** Option A for MVP, upgrade to B post-launch

3. **Tutorial/Onboarding:**
   - Should there be tooltips guiding first worker spawn?
   - "Click to choose where your worker will gather resources!" prompt?
   - **Recommendation:** Single tooltip on first spawn, disappears after placement

4. **Resource Cap:**
   - Should Wax/Nectar have maximum values (999? unlimited?)
   - **Recommendation:** Unlimited for MVP (no reason to cap in 5-minute game)

5. **Worker Visual Position:**
   - Exactly centered on tile, or slight random offset for multiple Workers?
   - **Recommendation:** Centered for single Worker, slight offset if multiple on same tile

6. **Placement Mode Clarity:**
   - Should valid spawn locations pulse/animate to draw attention?
   - Should there be a "Cancel" button on-screen during placement?
   - **Recommendation:** Pulsing highlights + on-screen prompt with Cancel instructions

---

## Implementation Priority Order

### Phase 1: Core Resource System
1. Create `ResourceManager.cs` singleton
2. Track `currentWax` and `currentNectar` (int values)
3. Add `AddWax()` and `AddNectar()` public methods
4. Create UI display for both resources (top-left corner)

### Phase 2: Click Detection
1. Add click detection to Hive tile (always active)
2. Add click detection to Flower tiles (when connected)
3. Implement visual feedback (tile bounce animation)
4. Add floating text for "+1 Wax" / "+1 Nectar"
5. Add satisfying sound effects (optional but recommended)

### Phase 3: Build Cost Integration
1. Modify `TileHoverDetector.OnHighlightSelected()`
2. Check `ResourceManager.CanAffordConnector()` before placement
3. Call `ResourceManager.SpendWax(10)` on successful placement
4. Show visual feedback if insufficient Wax (red text flash?)

### Phase 4: Worker Placement System
1. Create `WorkerPlacementController.cs` script
2. Add "Spawn Worker" UI button
3. Implement `ActivatePlacementMode()` method
4. Show highlights on Hive + connected Flowers
5. Detect hover and apply glow effect to hovered location
6. Handle click to spawn worker at chosen location
7. Validate spawn location (must be Hive or connected Flower)
8. Deduct 30 Nectar and create Worker instance

### Phase 5: Passive Generation
1. Add `Update()` loop in `ResourceManager`
2. Use `Time.deltaTime` accumulation for fractional resources
3. Query active Workers for their generation rates
4. Update Wax/Nectar values automatically
5. Test with 1, 3, and 5 Workers to verify scaling

### Phase 6: Worker Visualization
1. Create simple sprite/circle prefab for Worker
2. Spawn visual above assigned tile when worker created
3. Add gentle bobbing animation (up/down)
4. Color-code: Yellow for Hive, Pink for Flowers
5. Update worker count display on each tile

### Phase 7: Polish & Balancing
1. Playtest full 5-minute loop
2. Adjust values if pacing feels off
3. Add particle effects to clicks (optional)
4. Improve UI feedback for button states
5. Add tooltips for Hive and Flowers showing worker counts

---

## Success Criteria for MVP

The Resource & Bee System is complete when:

✅ Player can click Hive to generate Wax manually  
✅ Player can spend 10 Wax to place Connector tiles  
✅ Player can click connected Flowers to generate Nectar  
✅ Disconnected Flowers are not clickable (visual feedback clear)  
✅ Player can spend 30 Nectar to spawn AI Worker Bees  
✅ Player can choose where to spawn workers (Hive or any connected Flower)  
✅ Placement mode shows clear visual feedback (highlights, hover effects)  
✅ Workers passively generate resources at correct rates  
✅ UI displays current Wax, Nectar, and Worker count  
✅ Click bonus system works (clicks worth more with more Workers)  
✅ Game is completable in ~5 minutes with satisfying strategic decisions  

---

## Appendix: Example Playtesting Session

**Player: New user testing MVP for first time**
```
00:00 - Game starts, sees Hive and 3 Flowers
00:10 - Discovers clicking Hive generates Wax (+1 per click)
00:30 - Accumulates 10 Wax, enters Build Mode
00:45 - Places first Connector tile toward nearest Flower
01:00 - Clicks Hive 10 more times, places second Connector
01:30 - Continues pattern, connects first Flower
01:45 - Discovers clicking Flower generates Nectar
02:00 - Alternates between clicking Hive and Flower
02:30 - Accumulates 30 Nectar, "Spawn Worker" button lights up
02:40 - Clicks button, enters placement mode
02:42 - Sees highlights on Hive and connected Flower
02:45 - Thinks: "I need more Wax to expand", clicks Hive highlight
02:46 - Worker spawns at Hive, Wax generates automatically
03:00 - Focuses on clicking Flower, builds toward second Flower
03:30 - Spawns second Worker at Flower for Nectar generation
04:00 - Has 3 Workers (2 Hive, 1 Flower), clicks now worth 2x
04:15 - Realizes can spawn more workers, adds another to Flower
04:30 - Connects second and third Flowers rapidly with passive Wax
04:45 - Spawns final workers strategically for balanced economy
05:00 - Win condition achieved: "Colony Expanded Successfully!"
```

**Feedback:** "Loved having control over my workers! Felt like I was really managing the colony. The choice between Wax and Nectar workers added great strategy."

---

**End of Document**