# Bee Colony Expansion - Resource & Bee System Design

**Document Version:** 1.0  
**Last Updated:** December 29, 2025  
**Status:** Design Complete - Ready for Implementation

---

## Overview

This document outlines the complete Resource and Worker Bee system for Bee Colony Expansion MVP. The game transitions from a pure clicker to an idle/clicker hybrid as players progress.

---

## Core Game Loop

### Phase 1: Pure Clicker (Early Game - Minutes 0-1)
```
Player (The First Worker Bee):
├── Clicks Hive → Generates 1 Wax per click
├── Clicks connected Flower → Generates 1 Nectar per click
└── Spends Wax to place Connector tiles (10 Wax each)

Goal: Manually gather resources, connect first Flower
```

### Phase 2: Idle Transition (Mid Game - Minutes 1-3)
```
Once player has enough Nectar:
├── Spawn first AI Worker Bee (costs 30 Nectar)
├── Worker auto-collects resources passively
└── Player still clicks for extra resources (clicker bonus)

Goal: Transition from active clicking to passive generation
```

### Phase 3: Automation (Late Game - Minutes 3-5)
```
Multiple Workers:
├── Auto-assigned to Hive or Flowers based on need
├── Player focuses on expansion strategy
├── Clicks provide bonus acceleration
└── Complete win condition (all 3 Flowers connected)

Goal: Optimize resource flow, achieve victory
```

---

## Resources

### Wax (Building Currency)
- **Generated by:** 
  - Player clicks on Hive (1 Wax per click)
  - AI Worker Bees assigned to Hive (1 Wax per second)
- **Used for:** Placing Connector tiles (10 Wax each)
- **Starting amount:** 0
- **Purpose:** Expand pathways to reach Flowers

### Nectar (Growth Currency)
- **Generated by:**
  - Player clicks on connected Flowers (1 Nectar per click)
  - AI Worker Bees assigned to Flowers (0.5 Nectar per second)
- **Used for:** Spawning new Worker Bees (30 Nectar each)
- **Starting amount:** 0
- **Purpose:** Increase workforce, scale resource generation

---

## Worker Bee System

### Starting State
```
Game Start:
├── 1 Hive tile (center at 0,0)
├── 3 Flowers (randomly placed, 2 tiles away)
├── 1 Queen Bee (visual decoration on Hive)
├── Player = "The First Worker" (clicks to gather)
├── 0 Wax
├── 0 Nectar
└── 0 AI Worker Bees
```

### Worker Bee Properties
- **Cost to spawn:** 30 Nectar (flat rate for all Workers)
- **Maximum Workers:** 5 (for MVP scope)
- **Assignment System:** Auto-Assignment (Option B - Selected)
- **Generation Rates:**
  - Hive Workers: 1 Wax per second
  - Flower Workers: 0.5 Nectar per second

### Auto-Assignment Logic (Option B)

Workers are automatically assigned based on current resource needs:

```
Worker Assignment Priority:
1. If Wax < 50 → Assign to Hive
2. Else if Nectar < 30 → Assign to available connected Flower
3. Else → Distribute evenly between Hive and Flowers

Reassignment Triggers:
- When a new Flower connects to the Hive
- When a new Worker is spawned
- When resource thresholds change
```

**Why Auto-Assignment:**
- Simpler for MVP (no UI for manual assignment)
- More idle-game feel (player focuses on expansion)
- Automatically optimizes resource flow
- Reduces decision paralysis for new players

---

## Player Interaction (Clicking)

### Clickable Targets

**Hive (Always Clickable):**
- Click → +1 Wax
- Visual feedback: Tile bounce, "+1 Wax" floating text, particle effect
- Available from game start

**Flower (Only When Connected):**
- Click → +1 Nectar
- Requirement: Continuous path from Hive to Flower
- Visual feedback: Tile bounce, "+1 Nectar" floating text, particle effect
- When disconnected: Grayed out, no interaction

### Click Bonus System

Player clicks remain valuable even with AI Workers:

```
Click Value Scaling:
- Base: 1 resource per click
- With 1-2 Workers: 1 resource per click (no bonus)
- With 3-4 Workers: 2 resources per click (+1 bonus)
- With 5+ Workers: 3 resources per click (+2 bonus)

Formula: clickValue = 1 + floor(workerCount / 2)
```

**Purpose:** Keeps clicking relevant in late game, rewards player engagement

---

## Visual Feedback Requirements

### Clicking Feedback
```
On Player Click (Hive or Flower):
├── Tile scale animation (bounce)
├── Floating text: "+1 Wax" or "+1 Nectar"
├── Particle effect (sparkles, pollen)
└── Sound effect (satisfying ding/chime)
```

### Tile States

**Hive (Active):**
- Normal yellow/gold color
- Shows assigned Worker count if any
- Always glows slightly

**Flower (Connected):**
- Normal pink/purple color
- Gentle pulse/glow animation
- Shows assigned Worker count if any
- Clickable cursor on hover

**Flower (Disconnected):**
- Desaturated/grayed out appearance
- No glow or pulse
- Not clickable
- Shows "Not Connected" on hover

### Worker Bee Visualization (MVP)

**Simple Approach (Recommended for MVP):**
- Small sprite/circle above assigned tile
- Gentle bobbing animation (up/down)
- Color-coded: Yellow for Hive, Pink for Flower
- No pathfinding or movement needed

**Future Enhancement (Post-MVP):**
- 3D bee models
- Flying animation along tile paths
- Carry visual resources (Wax/Nectar)

---

## UI Requirements

### Resource Display (Top-Left Corner)
```
┌─────────────────────┐
│ Wax: 25             │
│ Nectar: 15          │
│                     │
│ Workers: 2 / 5      │
│ [Spawn Worker]      │  ← Button (costs 30 Nectar)
│ Cost: 30 Nectar     │
└─────────────────────┘
```

**Button States:**
- **Enabled (green):** Player has ≥30 Nectar, not at max Workers
- **Disabled (gray):** Player has <30 Nectar
- **Hidden:** Already at max Workers (5/5)

### Tile Hover Tooltips

**Hive Tooltip:**
```
┌─────────────────────┐
│ Hive                │
│ Click: +1 Wax       │
│ Workers: 1          │
│ Auto: 1 Wax/sec     │
└─────────────────────┘
```

**Connected Flower Tooltip:**
```
┌─────────────────────┐
│ Flower (Connected)  │
│ Click: +1 Nectar    │
│ Workers: 1          │
│ Auto: 0.5 Nectar/sec│
└─────────────────────┘
```

**Disconnected Flower Tooltip:**
```
┌─────────────────────┐
│ Flower (Disconnected)│
│ Build a path to      │
│ collect Nectar!      │
└─────────────────────┘
```

---

## Gameplay Flow (Complete Example)

### Minute 0-1: Pure Clicker Phase
1. Player clicks Hive 10 times → Accumulates 10 Wax
2. Activates Build Mode
3. Places first Connector tile (costs 10 Wax)
4. Repeats: Click Hive 10x → Place Connector
5. Continues until first Flower is connected (requires ~2-3 Connectors)
6. First Flower now clickable for Nectar

### Minute 1-2: Hybrid Phase
1. Player alternates clicking Hive and Flower
2. Accumulates 30 Nectar (requires ~30 clicks on Flower)
3. Clicks "Spawn Worker" button
4. First AI Worker spawns, auto-assigns to Hive
5. Wax now generates passively (1 per second)
6. Player focuses more on clicking Flower for Nectar

### Minute 2-3: Idle Acceleration
1. Player uses passive Wax to build toward second Flower
2. Accumulates 30 Nectar again
3. Spawns second AI Worker (auto-assigns to first Flower)
4. Nectar now generates passively (0.5 per second)
5. Second Flower connects, auto-assignment optimizes
6. Resource generation accelerates

### Minute 3-5: Strategic Phase
1. Player has 3-4 Workers active
2. Clicks provide 2x bonus multiplier
3. Passive generation handles most needs
4. Player focuses on connecting third Flower
5. Spawns 5th Worker if desired
6. All 3 Flowers connected → Win condition achieved

**Total MVP Playtime:** ~5 minutes ✅

---

## Technical Implementation Notes

### Resource Manager Architecture
```
ResourceManager (Singleton MonoBehaviour)
├── Fields:
│   ├── currentWax (float for accumulation, int for display)
│   ├── currentNectar (float for accumulation, int for display)
│   ├── waxAccumulator (tracks fractional seconds)
│   ├── nectarAccumulator (tracks fractional seconds)
│   ├── activeWorkers (List<WorkerBee>)
│   └── maxWorkers (const int = 5)
│
├── Methods:
│   ├── AddWax(int amount) - from player clicks
│   ├── AddNectar(int amount) - from player clicks
│   ├── CanAffordConnector() → bool (checks Wax >= 10)
│   ├── SpendWax(int amount) → bool
│   ├── CanAffordWorker() → bool (checks Nectar >= 30)
│   ├── SpawnWorker() → bool (creates new WorkerBee)
│   └── Update() - handles passive generation accumulation
```

### Worker Bee Class
```
WorkerBee (MonoBehaviour or data class)
├── Fields:
│   ├── assignedTile (Vector2Int coordinate)
│   ├── assignmentType (enum: Hive, Flower)
│   ├── generationRate (float: 1.0 for Hive, 0.5 for Flower)
│   └── visualRepresentation (GameObject sprite/model)
│
├── Methods:
│   ├── AssignToTile(Vector2Int coord, TileType type)
│   ├── GetGenerationRate() → float
│   └── UpdatePosition() - moves visual to assigned tile
```

### Auto-Assignment Logic
```
Method: ReassignWorkers()
Called when:
- New Worker spawned
- New Flower connected
- Resource thresholds crossed

Logic:
1. Get list of all Workers
2. Get current Wax and Nectar values
3. Get list of connected Flowers
4. If Wax < 50: Prioritize Hive assignments
5. Else if Nectar < 30: Prioritize Flower assignments
6. Else: Distribute evenly
7. Update each Worker's assignment
8. Move Worker visuals to new positions
```

### Flower Connection Detection
```
Method: CheckFlowerConnection(Vector2Int flowerCoord)
Returns: bool (is connected to Hive)

Logic:
1. Use existing BFS pathfinding from TileHoverDetector
2. Start at flowerCoord
3. Search for path to Hive (0,0)
4. Return true if path exists
5. Cache result until next tile placement
```

### Click Detection
```
On Player Click:
1. Raycast from mouse to detect tile
2. Get tile coordinate
3. Check if tile is Hive or Flower
4. If Flower, verify connection with CheckFlowerConnection()
5. If valid, call ResourceManager.AddWax() or AddNectar()
6. Trigger visual feedback (animation, floating text, particles)
```

---

## Balance & Tuning Values

### Core Values (MVP)
| Parameter | Value | Rationale |
|-----------|-------|-----------|
| Starting Wax | 0 | Pure clicker start |
| Starting Nectar | 0 | Must connect Flower first |
| Wax per Click | 1 | Base unit |
| Nectar per Click | 1 | Equal to Wax |
| Connector Cost | 10 Wax | ~10 clicks, feels achievable |
| Worker Cost | 30 Nectar | ~1 minute with 1 Flower |
| Max Workers | 5 | Keeps MVP focused |
| Hive Generation | 1 Wax/sec | Matches click value |
| Flower Generation | 0.5 Nectar/sec | Slower, more valuable |
| Click Bonus Threshold | 3 Workers | Rewards progression |

### Alternative Starting State (Quick Start Option)
```
If playtesting shows 10-click start is too slow:
├── Starting Wax: 10 (can place first tile immediately)
├── Starting Nectar: 0 (still must connect Flower)
└── Reduces initial friction, gets player building faster
```

---

## Future Enhancements (Post-MVP)

### Upgrade System
- **Efficient Foraging:** Workers generate +25% resources (50 Nectar)
- **Click Training:** Player clicks worth +1 bonus (100 Nectar)
- **Rapid Building:** Connector tiles cost 8 Wax instead of 10 (75 Nectar)
- **Hive Expansion:** Increase max Workers to 10 (200 Nectar)

### Worker Specialization
- **Forager Bee:** Generates 1.0 Nectar/sec (upgrade cost: 50 Nectar)
- **Builder Bee:** Generates 1.5 Wax/sec (upgrade cost: 50 Wax)
- **Scout Bee:** Reveals optimal path to Flowers (upgrade cost: 100 Nectar)

### Visual Enhancements
- 3D bee models with flight animation
- Pathfinding along Connector tiles
- Resource carry visualization (bees hold Wax/Nectar)
- Hive interior view showing stored resources

### Advanced Mechanics
- Multiple Hive tiles (expansion mechanic)
- Different Flower types (Rose = 1.0 Nectar/sec, Dandelion = 0.3 Nectar/sec)
- Queen Bee active ability (temporary generation boost)
- Day/night cycle (bonus generation at certain times)

---

## Open Questions & Decisions

### Resolved Decisions:
✅ **Worker Assignment:** Auto-Assignment (Option B) - Selected  
✅ **Worker Cost:** Flat 30 Nectar each  
✅ **Max Workers:** 5 for MVP  
✅ **Click Bonus:** Scales with worker count (+1 per 2 Workers)  

### Remaining Questions:

1. **Starting Wax:**
   - Option A: 0 Wax (pure clicker start, 10 clicks needed)
   - Option B: 10 Wax (quick start, immediate placement)
   - **Recommendation:** Test both, use Option B if initial clicking feels grindy

2. **Visual Style for Bees:**
   - Option A: Simple colored sprites/circles (faster implementation)
   - Option B: Low-poly 3D bee models (more polished)
   - **Recommendation:** Option A for MVP, upgrade to B post-launch

3. **Tutorial/Onboarding:**
   - Should there be tooltips guiding first clicks?
   - "Click the Hive to gather Wax!" on first load?
   - **Recommendation:** Single tooltip on game start, disappears after first click

4. **Resource Cap:**
   - Should Wax/Nectar have maximum values (999? unlimited?)
   - **Recommendation:** Unlimited for MVP (no reason to cap in 5-minute game)

5. **Worker Visual Position:**
   - Exactly centered on tile, or slight random offset for multiple Workers?
   - **Recommendation:** Centered for single Worker, slight offset if multiple on same tile

---

## Implementation Priority Order

### Phase 1: Core Resource System
1. Create `ResourceManager.cs` singleton
2. Track `currentWax` and `currentNectar` (int values)
3. Add `AddWax()` and `AddNectar()` public methods
4. Create UI display for both resources (top-left corner)

### Phase 2: Click Detection
1. Add click detection to Hive tile (always active)
2. Add click detection to Flower tiles (when connected)
3. Implement visual feedback (tile bounce animation)
4. Add floating text for "+1 Wax" / "+1 Nectar"
5. Add satisfying sound effects (optional but recommended)

### Phase 3: Build Cost Integration
1. Modify `TileHoverDetector.OnHighlightSelected()`
2. Check `ResourceManager.CanAffordConnector()` before placement
3. Call `ResourceManager.SpendWax(10)` on successful placement
4. Show visual feedback if insufficient Wax (red text flash?)

### Phase 4: Worker Bee System
1. Create `WorkerBee` class (simple data class initially)
2. Add "Spawn Worker" UI button
3. Check `ResourceManager.CanAffordWorker()` on button click
4. Deduct 30 Nectar, create new Worker instance
5. Implement auto-assignment logic (Option B)

### Phase 5: Passive Generation
1. Add `Update()` loop in `ResourceManager`
2. Use `Time.deltaTime` accumulation for fractional resources
3. Query active Workers for their generation rates
4. Update Wax/Nectar values automatically
5. Test with 1, 3, and 5 Workers to verify scaling

### Phase 6: Worker Visualization
1. Create simple sprite/circle prefab for Worker
2. Spawn visual above assigned tile
3. Add gentle bobbing animation (up/down)
4. Color-code: Yellow for Hive, Pink for Flowers
5. Destroy visual when Worker is reassigned

### Phase 7: Polish & Balancing
1. Playtest full 5-minute loop
2. Adjust values if pacing feels off
3. Add particle effects to clicks (optional)
4. Improve UI feedback for button states
5. Add tooltips for Hive and Flowers

---

## Success Criteria for MVP

The Resource & Bee System is complete when:

✅ Player can click Hive to generate Wax manually  
✅ Player can spend 10 Wax to place Connector tiles  
✅ Player can click connected Flowers to generate Nectar  
✅ Disconnected Flowers are not clickable (visual feedback clear)  
✅ Player can spend 30 Nectar to spawn AI Worker Bees  
✅ Workers auto-assign to Hive or Flowers based on need  
✅ Workers passively generate resources at correct rates  
✅ UI displays current Wax, Nectar, and Worker count  
✅ Click bonus system works (clicks worth more with more Workers)  
✅ Game is completable in ~5 minutes with satisfying progression  

---

## Appendix: Example Playtesting Session

**Player: New user testing MVP for first time**

```
00:00 - Game starts, sees Hive and 3 Flowers
00:10 - Discovers clicking Hive generates Wax (+1 per click)
00:30 - Accumulates 10 Wax, enters Build Mode
00:45 - Places first Connector tile toward nearest Flower
01:00 - Clicks Hive 10 more times, places second Connector
01:30 - Continues pattern, connects first Flower
01:45 - Discovers clicking Flower generates Nectar
02:00 - Alternates between clicking Hive and Flower
02:30 - Accumulates 30 Nectar, sees "Spawn Worker" button lights up
02:45 - Spawns first Worker, notices Wax now generates automatically
03:00 - Focuses on clicking Flower, builds toward second Flower
03:30 - Spawns second Worker, Nectar also generates passively
04:00 - Has 3 Workers, clicks now worth 2x bonus
04:30 - Connects second and third Flowers rapidly
05:00 - Win condition achieved: "Colony Expanded Successfully!"
```

**Feedback:** "Satisfying progression from clicking to automation. Loved watching my workers help out!"

---

**End of Document**